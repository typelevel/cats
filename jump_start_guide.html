<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Jump Start Guide</title>
  
  <meta name="author" content="cats contributors"/>
  
  <meta name="author" content="Cody Allen"/>
  
  <meta name="author" content="Ross Baker"/>
  
  <meta name="author" content="Arman Bilge"/>
  
  <meta name="author" content="P. Oscar Boykin"/>
  
  <meta name="author" content="Travis Brown"/>
  
  <meta name="author" content="Adelbert Chang"/>
  
  <meta name="author" content="Daniel Esik"/>
  
  <meta name="author" content="Peter Neyens"/>
  
  <meta name="author" content="Rob Norris"/>
  
  <meta name="author" content="Erik Osheim"/>
  
  <meta name="author" content="LukaJCB"/>
  
  <meta name="author" content="Michael Pilquist"/>
  
  <meta name="author" content="Miles Sabin"/>
  
  <meta name="author" content="Daniel Spiewak"/>
  
  <meta name="author" content="Frank Thomas"/>
  
  <meta name="author" content="Sergey Torgashov"/>
  
  <meta name="author" content="Julien Truffaut"/>
  
  <meta name="author" content="Kailuo Wang"/>
  
  
  <meta name="description" content="docs"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="helium/site/laika-helium.css" />
  <script src="helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="https://typelevel.org"><img src="https://typelevel.org/img/logo.svg"></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://www.javadoc.io/doc/org.typelevel/cats-docs_2.13/2.13.0/"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://github.com/typelevel/cats"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://www.javadoc.io/doc/org.typelevel/cats-docs_2.13/2.13.0/"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://github.com/typelevel/cats"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="index.html">Cats</a></li>
    <li class="level1 nav-leaf"><a href="typeclasses.html">Type Classes</a></li>
    <li class="level1 nav-leaf"><a href="datatypes.html">Data Types</a></li>
    <li class="level1 nav-leaf"><a href="algebra.html">Algebra</a></li>
    <li class="level1 nav-leaf"><a href="alleycats.html">Alleycats</a></li>
    <li class="level1 nav-leaf"><a href="motivations.html">Motivations</a></li>
    <li class="level1 nav-leaf"><a href="resources_for_learners.html">Resources for Learners</a></li>
    <li class="level1 active nav-leaf"><a href="#">Jump Start Guide</a></li>
    <li class="level1 nav-leaf"><a href="imports.html">Imports</a></li>
    <li class="level1 nav-leaf"><a href="faq.html">FAQ</a></li>
    <li class="level1 nav-leaf"><a href="CONTRIBUTING.html">Contributor Guide</a></li>
    <li class="level1 nav-leaf"><a href="ADOPTERS.html">Adopters</a></li>
    <li class="level1 nav-leaf"><a href="colophon.html">Colophon</a></li>
    <li class="level1 nav-leaf"><a href="nomenclature.html">Glossary</a></li>
    <li class="level1 nav-leaf"><a href="guidelines.html">Guidelines</a></li>
    <li class="level1 nav-leaf"><a href="typelevelEcosystem.html">Typelevel Ecosystem</a></li>
    <li class="level1 nav-header">Type Classes</li>
    <li class="level2 nav-leaf"><a href="typeclasses/alternative.html">Alternative</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/applicative.html">Applicative</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/applicativemonaderror.html">ApplicativeError and MonadError</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/applicativetraverse.html">Applicative and Traversable Functors</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/arrow.html">Arrow</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/arrowchoice.html">Arrow Choice</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/bifoldable.html">Bifoldable</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/bifunctor.html">Bifunctor</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/bimonad.html">Bimonad</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/comonad.html">Comonad</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/contravariant.html">Contravariant</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/contravariantmonoidal.html">Contravariant Monoidal</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/eq.html">Eq</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/foldable.html">Foldable</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/functor.html">Functor</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/invariant.html">Invariant</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/invariantmonoidal.html">Invariant Monoidal</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/lawtesting.html">Law testing</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/monad.html">Monad</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/monoid.html">Monoid</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/monoidk.html">MonoidK</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/nonemptytraverse.html">NonEmptyTraverse</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/parallel.html">Parallel</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/reducible.html">Reducible</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/semigroup.html">Semigroup</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/semigroupk.html">SemigroupK</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/show.html">Show</a></li>
    <li class="level2 nav-leaf"><a href="typeclasses/traverse.html">Traverse</a></li>
    <li class="level1 nav-header">Data Types</li>
    <li class="level2 nav-leaf"><a href="datatypes/chain.html">Chain</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/const.html">Const</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/contt.html">ContT</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/eithert.html">EitherT</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/eval.html">Eval</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/freeapplicative.html">Free Applicative</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/freemonad.html">Free Monad</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/functionk.html">FunctionK</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/id.html">Id</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/ior.html">Ior</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/iort.html">IorT</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/kleisli.html">Kleisli</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/nel.html">NonEmptyList</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/nested.html">Nested</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/oneand.html">OneAnd</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/optiont.html">OptionT</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/state.html">State</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/statet.html">StateT</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/validated.html">Validated</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/writer.html">Writer</a></li>
    <li class="level2 nav-leaf"><a href="datatypes/writert.html">WriterT</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Jump Start Guide</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#option-helpers">Option Helpers</a></li>
    <li class="level1 nav-leaf"><a href="#either-helpers">Either Helpers</a></li>
    <li class="level1 nav-leaf"><a href="#tuples">Tuples</a></li>
    <li class="level1 nav-node"><a href="#traversing">Traversing</a></li>
    <li class="level2 nav-leaf"><a href="#traverse"><code>traverse</code></a></li>
    <li class="level2 nav-leaf"><a href="#sequence"><code>sequence</code></a></li>
    <li class="level2 nav-leaf"><a href="#flattraverse"><code>flatTraverse</code></a></li>
    <li class="level1 nav-node"><a href="#monad-transformers">Monad Transformers</a></li>
    <li class="level2 nav-leaf"><a href="#optiont">OptionT</a></li>
    <li class="level2 nav-leaf"><a href="#eithert">EitherT</a></li>
    <li class="level1 nav-leaf"><a href="#common-issues">Common issues</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="introduction" class="title">Introduction</h1>
        <p>This jump start guide barely scratches the surface of what Cats can do, but instead provides a concise hands-on introduction to the patterns you&#39;re most likely to take advantage of in your Scala project.
        If you&#39;re using the constructs like <a href="http://www.scala-lang.org/api/current/scala/concurrent/Future.html"><code>Future</code></a>,
        <a href="http://www.scala-lang.org/api/current/scala/Option.html"><code>Option</code></a> or
        <a href="http://www.scala-lang.org/api/current/scala/util/Either.html"><code>Either</code></a> on a daily basis,
        it&#39;s very likely that Cats can simplify and improve the readability of your code.</p>
        <p>Please refer to the <a href="https://github.com/typelevel/cats">wiki on GitHub</a> for guidelines on how to add the library to your project dependencies.
        We are sticking to <a href="https://github.com/typelevel/cats/releases/tag/v1.0.1">version 1.0.1</a> in the entire post.</p>
        <p>Let&#39;s go through the library package-wise, looking at the syntax available in each package.</p>
        
        <h1 id="option-helpers" class="section"><a class="anchor-link left" href="#option-helpers"><i class="icofont-laika link">&#xef71;</i></a>Option Helpers</h1>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">syntax</span><span>.</span><span class="identifier">all</span><span>.</span><span class="identifier">_</span></code></pre>
        <p>Importing this package enables <code>obj.some</code> syntax — equivalent to <code>Some(obj)</code>.
        The only real difference is that the value is already upcast to <code>Option[T]</code> from <code>Some[T]</code>.</p>
        <p>Using <code>obj.some</code> instead of <code>Some(obj)</code> can sometimes e.g. improve readability when you need to provide dummy implementation for service methods for the purpose of testing.
        For example, if you put the following implicit class into the scope:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">scala</span><span>.</span><span class="identifier">concurrent</span><span>.</span><span class="type-name">Future</span><span>

</span><span class="keyword">implicit</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">ToFutureSuccessful</span><span>[</span><span class="type-name">T</span><span>](</span><span class="identifier">obj</span><span>: </span><span class="type-name">T</span><span>) {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">asFuture</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">T</span><span>] = </span><span class="type-name">Future</span><span>.</span><span class="identifier">successful</span><span>(</span><span class="identifier">obj</span><span>)
}</span></code></pre>
        <p>then you can use the chained syntax shown below:</p>
        <pre><code class="nohighlight"><span class="keyword">class</span><span> </span><span class="type-name">Account</span><span> { </span><span class="comment">/* ... */</span><span> }

</span><span class="keyword">trait</span><span> </span><span class="type-name">AccountService</span><span> {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">getAccountById</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Account</span><span>]]
}

</span><span class="keyword">class</span><span> </span><span class="type-name">DummyAccountServiceImpl</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">AccountService</span><span> {

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">dummyAccount</span><span>: </span><span class="type-name">Account</span><span> = ???

  </span><span class="comment">/* ... */</span><span>
  </span><span class="keyword">override</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">getAccountById</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Account</span><span>]] = </span><span class="identifier">dummyAccount</span><span>.</span><span class="identifier">some</span><span>.</span><span class="identifier">asFuture</span><span>
  </span><span class="comment">/* ... */</span><span>
}</span></code></pre>
        <p>That&#39;s more readable than <code>Future.successful(Some(dummyAccount))</code>, especially if this pattern repeats frequently.
        Chaining <code>.some.asFuture</code> at the end rather than putting it at the front also helps focus on what&#39;s actually being returned rather than on the expected wrapper type.</p>
        <p><code>none[T]</code>, in turn, is shorthand for <code>Option.empty[T]</code> which is just <code>None</code>, but already upcast from <code>None.type</code> to <code>Option[T]</code>.
        Providing a more specialized type sometimes helps the Scala compiler properly infer the type of expressions containing <code>None</code>.</p>
        
        <h1 id="either-helpers" class="section"><a class="anchor-link left" href="#either-helpers"><i class="icofont-laika link">&#xef71;</i></a>Either Helpers</h1>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">syntax</span><span>.</span><span class="identifier">all</span><span>.</span><span class="identifier">_</span></code></pre>
        <p><code>obj.asRight</code> is <code>Right(obj)</code>, <code>obj.asLeft</code> is <code>Left(obj)</code>.
        In both cases the type of returned value is widened from <code>Right</code> or <code>Left</code> to <code>Either</code>.
        Just as was the case with <code>.some</code>, these helpers are handy to combine with <code>.asFuture</code> to improve readability:</p>
        <pre><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">User</span><span>(</span><span class="identifier">accountId</span><span>: </span><span class="type-name">Long</span><span>) { </span><span class="comment">/* ... */</span><span> }

</span><span class="keyword">trait</span><span> </span><span class="type-name">UserService</span><span> {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">ensureUserExists</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">Either</span><span>[</span><span class="type-name">Exception</span><span>, </span><span class="type-name">User</span><span>]]
}

</span><span class="keyword">class</span><span> </span><span class="type-name">UserServiceSpec</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">UserService</span><span> {

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">dummyUser</span><span>: </span><span class="type-name">User</span><span> = ???

  </span><span class="comment">/* ... */</span><span>
  </span><span class="keyword">override</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">ensureUserExists</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">Either</span><span>[</span><span class="type-name">Exception</span><span>, </span><span class="type-name">User</span><span>]] = </span><span class="identifier">dummyUser</span><span>.</span><span class="identifier">asRight</span><span>.</span><span class="identifier">asFuture</span><span> </span><span class="comment">// instead of Future.successful(Right(dummyUser))
</span><span>  </span><span class="comment">/* ... */</span><span>
}</span></code></pre>
        <p><code>Either.fromOption(option: Option[A], ifNone: =&gt; E)</code>, in turn, is a useful helper for converting an <code>Option</code> to an <code>Either</code>.
        If the provided <code>option</code> is <code>Some(x)</code>, it becomes <code>Right(x)</code>.
        Otherwise it becomes <code>Left</code> with the provided <code>ifNone</code> value inside.</p>
        
        <h1 id="tuples" class="section"><a class="anchor-link left" href="#tuples"><i class="icofont-laika link">&#xef71;</i></a>Tuples</h1>
        <p>The <code>apply</code> package provides <code>(..., ..., ...).mapN</code> syntax, which allows for an intuitive construct for applying a function that takes more than one parameter to multiple effectful values (like futures).</p>
        <p>Let&#39;s say we have 3 futures, one of type <code>Int</code>, one of type <code>String</code>, one of type <code>User</code> and a method accepting three parameters — <code>Int</code>, <code>String</code> and <code>User</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">scala</span><span>.</span><span class="identifier">concurrent</span><span>.</span><span class="type-name">ExecutionContext</span><span>.</span><span class="type-name">Implicits</span><span>.</span><span class="identifier">global</span><span>

</span><span class="keyword">class</span><span> </span><span class="type-name">ProcessingResult</span><span> { </span><span class="comment">/* ... */</span><span> }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">intFuture</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">Int</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }
</span><span class="keyword">def</span><span> </span><span class="declaration-name">stringFuture</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">String</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }
</span><span class="keyword">def</span><span> </span><span class="declaration-name">userFuture</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">User</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">process</span><span>(</span><span class="identifier">value</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">contents</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">user</span><span>: </span><span class="type-name">User</span><span>): </span><span class="type-name">ProcessingResult</span><span> = { </span><span class="comment">/* ... */</span><span> ??? }</span></code></pre>
        <p>Our goal is to apply the function to the values computed by those 3 futures.
        With <code>apply</code> syntax this becomes very easy and concise:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">syntax</span><span>.</span><span class="identifier">all</span><span>.</span><span class="identifier">_</span><span>

</span><span class="keyword">def</span><span> </span><span class="declaration-name">processAsync</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">ProcessingResult</span><span>] = {
  (</span><span class="identifier">intFuture</span><span>, </span><span class="identifier">stringFuture</span><span>, </span><span class="identifier">userFuture</span><span>).</span><span class="identifier">mapN</span><span> {
    (</span><span class="identifier">value</span><span>, </span><span class="identifier">contents</span><span>, </span><span class="identifier">user</span><span>) =&gt;
      </span><span class="identifier">process</span><span>(</span><span class="identifier">value</span><span>, </span><span class="identifier">contents</span><span>, </span><span class="identifier">user</span><span>)
  }
}</span></code></pre>
        <p>By default the implicit instances (namely, <a href="https://www.javadoc.io/doc/org.typelevel/cats-docs_2.13/2.13.0//cats/Functor.html"><code>Functor[Future]</code></a> and
        <a href="https://www.javadoc.io/doc/org.typelevel/cats-docs_2.13/2.13.0//cats/Semigroupal.html"><code>Semigroupal[Future]</code></a>) required for <code>mapN</code> to work properly are always visible. They are present in the respective companion objects of the instances and hence we do not need to import them explicitly.<br></p>
        <p>This above idea can be expressed even shorter, just:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">processAsync2</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">ProcessingResult</span><span>] = (</span><span class="identifier">intFuture</span><span>, </span><span class="identifier">stringFuture</span><span>, </span><span class="identifier">userFuture</span><span>).</span><span class="identifier">mapN</span><span>(</span><span class="identifier">process</span><span>)</span></code></pre>
        <p>If any of the chained futures fails, the resulting future will also fail with the same exception as the first failing future in the chain (this is fail-fast behavior).</p>
        <p>What&#39;s important, all futures will run in parallel, as opposed to what would happen in a <code>for</code> comprehension:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">processAsync3</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">ProcessingResult</span><span>] = {
  </span><span class="keyword">for</span><span> {
    </span><span class="identifier">value</span><span> &lt;- </span><span class="identifier">intFuture</span><span>
    </span><span class="identifier">contents</span><span> &lt;- </span><span class="identifier">stringFuture</span><span>
    </span><span class="identifier">user</span><span> &lt;- </span><span class="identifier">userFuture</span><span>
  } </span><span class="keyword">yield</span><span> </span><span class="identifier">process</span><span>(</span><span class="identifier">value</span><span>, </span><span class="identifier">contents</span><span>, </span><span class="identifier">user</span><span>)
}</span></code></pre>
        <p>In the above snippet (which under the hood translates to <code>flatMap</code> and <code>map</code> calls), <code>stringFuture</code> will not run until <code>intFuture</code> is successfully completed,
        and in the same way <code>userFuture</code> will be run only after <code>stringFuture</code> completes.
        But since the computations are independent of one another, it&#39;s perfectly viable to run them in parallel with <code>mapN</code> instead.</p>
        
        <h1 id="traversing" class="section"><a class="anchor-link left" href="#traversing"><i class="icofont-laika link">&#xef71;</i></a>Traversing</h1>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">syntax</span><span>.</span><span class="identifier">all</span><span>.</span><span class="identifier">_</span></code></pre>
        
        <h2 id="traverse" class="section"><a class="anchor-link left" href="#traverse"><i class="icofont-laika link">&#xef71;</i></a><code>traverse</code></h2>
        <p>If you have an instance <code>obj</code> of type <code>F[A]</code> that can be mapped over (like <code>Future</code>) and a function <code>fun</code> of type <code>A =&gt; G[B]</code>, then calling <code>obj.map(fun)</code> would give you <code>F[G[B]]</code>.
        In many common real-life cases, like when <code>F</code> is <code>Option</code> and <code>G</code> is <code>Future</code>, you would get <code>Option[Future[B]]</code>, which most likely isn&#39;t what you wanted.</p>
        <p><code>traverse</code> comes as a solution here.
        If you call <code>traverse</code> instead of <code>map</code>, like <code>obj.traverse(fun)</code>, you&#39;ll get <code>G[F[A]]</code>, which will be <code>Future[Option[B]]</code> in our case; this is much more useful and easier to process than <code>Option[Future[B]]</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">updateUser</span><span>(</span><span class="identifier">user</span><span>: </span><span class="type-name">User</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">User</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">updateUsers</span><span>(</span><span class="identifier">users</span><span>: </span><span class="type-name">List</span><span>[</span><span class="type-name">User</span><span>]): </span><span class="type-name">Future</span><span>[</span><span class="type-name">List</span><span>[</span><span class="type-name">User</span><span>]] = {
  </span><span class="identifier">users</span><span>.</span><span class="identifier">traverse</span><span>(</span><span class="identifier">updateUser</span><span>)
}</span></code></pre>
        <p>As a side note, there is also a dedicated method <code>Future.traverse</code> in the <a href="http://www.scala-lang.org/api/current/scala/concurrent/Future$.html"><code>Future</code></a> companion object,
        but the Cats version is far more readable and can easily work on any structure for which certain type classes are available.</p>
        
        <h2 id="sequence" class="section"><a class="anchor-link left" href="#sequence"><i class="icofont-laika link">&#xef71;</i></a><code>sequence</code></h2>
        <p><code>sequence</code> represents an even simpler concept: it can be thought of as simply swapping the types from <code>F[G[A]]</code> to <code>G[F[A]]</code> without even mapping the enclosed value like <code>traverse</code> does.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">foo</span><span>: </span><span class="type-name">List</span><span>[</span><span class="type-name">Future</span><span>[</span><span class="type-name">String</span><span>]] = </span><span class="type-name">List</span><span>(</span><span class="type-name">Future</span><span>(</span><span class="string-literal">&quot;hello&quot;</span><span>), </span><span class="type-name">Future</span><span>(</span><span class="string-literal">&quot;world&quot;</span><span>))
</span><span class="keyword">val</span><span> </span><span class="identifier">bar</span><span> = </span><span class="identifier">foo</span><span>.</span><span class="identifier">sequence</span><span> </span><span class="comment">// will have Future[List[String]] type</span></code></pre>
        <p><code>obj.sequence</code> is in fact implemented in Cats as <code>obj.traverse(identity)</code>.</p>
        <p>On the other hand, <code>obj.traverse(fun)</code> is roughly equivalent to <code>obj.map(fun).sequence</code>.</p>
        
        <h2 id="flattraverse" class="section"><a class="anchor-link left" href="#flattraverse"><i class="icofont-laika link">&#xef71;</i></a><code>flatTraverse</code></h2>
        <p>If you have an <code>obj</code> of type <code>F[A]</code> and a function <code>fun</code> of type <code>A =&gt; G[F[B]]</code>, then doing <code>obj.map(f)</code> yields result of type <code>F[G[F[B]]]</code> — very unlikely to be what you wanted.</p>
        <p>Traversing the <code>obj</code> instead of mapping helps a little — you&#39;ll get <code>G[F[F[B]]</code> instead.
        Since <code>G</code> is usually something like <code>Future</code> and <code>F</code> is <code>List</code> or <code>Option</code>, you would end up with <code>Future[Option[Option[A]]</code> or <code>Future[List[List[A]]]</code> — a bit awkward to process.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">lazy</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">valueOpt</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }
</span><span class="keyword">def</span><span> </span><span class="declaration-name">compute</span><span>(</span><span class="identifier">value</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>]] = { </span><span class="comment">/* ... */</span><span> ??? }
</span><span class="keyword">def</span><span> </span><span class="declaration-name">computeOverValue</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>]]] = </span><span class="identifier">valueOpt</span><span>.</span><span class="identifier">traverse</span><span>(</span><span class="identifier">compute</span><span>) </span><span class="comment">// has type Future[Option[Option[Int]]], not good</span></code></pre>
        <p>The solution could be to map the result with a <code>_.flatten</code> call like:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">computeOverValue2</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>]] = </span><span class="identifier">valueOpt</span><span>.</span><span class="identifier">traverse</span><span>(</span><span class="identifier">compute</span><span>).</span><span class="identifier">map</span><span>(</span><span class="identifier">_</span><span>.</span><span class="identifier">flatten</span><span>)</span></code></pre>
        <p>and this way you&#39;ll get the desired type <code>G[F[B]]</code> at the end.</p>
        <p>However, there is a neat shortcut for this called <code>flatTraverse</code>:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">computeOverValue3</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>]] = </span><span class="identifier">valueOpt</span><span>.</span><span class="identifier">flatTraverse</span><span>(</span><span class="identifier">compute</span><span>)</span></code></pre>
        <p>and that solves our problem for good.</p>
        
        <h1 id="monad-transformers" class="section"><a class="anchor-link left" href="#monad-transformers"><i class="icofont-laika link">&#xef71;</i></a>Monad Transformers</h1>
        
        <h2 id="optiont" class="section"><a class="anchor-link left" href="#optiont"><i class="icofont-laika link">&#xef71;</i></a>OptionT</h2>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">data</span><span>.</span><span class="type-name">OptionT</span></code></pre>
        <p>An instance of <a href="datatypes/optiont.html"><code>OptionT[F, A]</code></a> can be thought of as a wrapper over <code>F[Option[A]]</code>
        which adds a couple of useful methods specific to nested types that aren&#39;t available in <code>F</code> or <code>Option</code> itself.
        Most typically, your <code>F</code> will be <code>Future</code> (or sometimes slick&#39;s <code>DBIO</code>, but this requires having an implementation of Cats type classes like <code>Functor</code> or <code>Monad</code> for <code>DBIO</code>).
        Wrappers such as <code>OptionT</code> are generally known as <em>monad transformers</em>.</p>
        <p>A quite common pattern is mapping the inner value stored inside an instance of <code>F[Option[A]]</code> to an instance of <code>F[Option[B]]</code> with a function of type <code>A =&gt; B</code>.
        This can be done with rather verbose syntax like:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">lazy</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">resultFuture</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>]] = ???

</span><span class="keyword">def</span><span> </span><span class="declaration-name">mappedResultFuture</span><span>: </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">String</span><span>]] = </span><span class="identifier">resultFuture</span><span>.</span><span class="identifier">map</span><span> { </span><span class="identifier">maybeValue</span><span> =&gt;
  </span><span class="identifier">maybeValue</span><span>.</span><span class="identifier">map</span><span> { </span><span class="identifier">value</span><span> =&gt;
    </span><span class="comment">// Do something with the value and return String
</span><span>    ???
  }
}</span></code></pre>
        <p>With the use of <code>OptionT</code>, this can be simplified as follows:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">mappedResultFuture2</span><span>: </span><span class="type-name">OptionT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">String</span><span>] = </span><span class="type-name">OptionT</span><span>(</span><span class="identifier">resultFuture</span><span>).</span><span class="identifier">map</span><span> { </span><span class="identifier">value</span><span> =&gt;
  </span><span class="comment">// Do something with the value and return String
</span><span>  ???
}</span></code></pre>
        <p>The above <code>map</code> will return a value of type <code>OptionT[Future, String]</code>.</p>
        <p>To get the underlying <code>Future[Option[String]]</code> value, simply call <code>.value</code> on the <code>OptionT</code> instance.
        It&#39;s also a viable solution to fully switch to <code>OptionT[Future, A]</code> in method parameter/return types and completely (or almost completely) ditch <code>Future[Option[A]]</code> in type declarations.</p>
        <p>There are several ways to construct an <code>OptionT</code> instance.
        The method headers in the table below are slightly simplified: the type parameters and type classes required by each method are skipped.</p>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Takes</th>
              <th>Returns</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>OptionT.apply</code> or <code>OptionT(...)</code></td>
              <td><code>F[Option[A]]</code></td>
              <td><code>OptionT[F, A]</code></td>
            </tr>
            <tr>
              <td><code>OptionT.fromOption</code></td>
              <td><code>Option[A]</code></td>
              <td><code>OptionT[F, A]</code></td>
            </tr>
            <tr>
              <td><code>OptionT.liftF</code></td>
              <td><code>F[A]</code></td>
              <td><code>OptionT[F, A]</code></td>
            </tr>
            <tr>
              <td><code>OptionT.pure</code></td>
              <td><code>A</code></td>
              <td><code>OptionT[F, A]</code></td>
            </tr>
          </tbody>
        </table>
        <p>In production code you&#39;ll most commonly use the <code>OptionT(...)</code> syntax in order to wrap an instance of <code>Future[Option[A]]</code> into <code>OptionT[F, A]</code>.
        The other methods, in turn, prove useful to set up <code>OptionT</code>-typed dummy values in unit tests.</p>
        <p>We have already come across one of <code>OptionT</code>&#39;s methods, namely <code>map</code>.
        There are several other methods available and they mostly differ by the signature of the function they accept as the parameter.
        As was the case with the previous table, the expected type classes are skipped.</p>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Takes</th>
              <th>Returns</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>map[B]</code></td>
              <td><code>A =&gt; B</code></td>
              <td><code>OptionT[F, B]</code></td>
            </tr>
            <tr>
              <td><code>subflatMap[B]</code></td>
              <td><code>A =&gt; Option[B]</code></td>
              <td><code>OptionT[F, B]</code></td>
            </tr>
            <tr>
              <td><code>semiflatMap[B]</code></td>
              <td><code>A =&gt; F[B]</code></td>
              <td><code>OptionT[F, B]</code></td>
            </tr>
            <tr>
              <td><code>flatMapF[B]</code></td>
              <td><code>A =&gt; F[Option[B]]</code></td>
              <td><code>OptionT[F, B]</code></td>
            </tr>
            <tr>
              <td><code>flatMap[B]</code></td>
              <td><code>A =&gt; OptionT[F, B]</code></td>
              <td><code>OptionT[F, B]</code></td>
            </tr>
          </tbody>
        </table>
        <p>In practice, you&#39;re most likely to use <code>map</code> and <code>semiflatMap</code>.</p>
        <p>As is always the case with <code>flatMap</code> and <code>map</code>, you can use it not only explicitly, but also under the hood in <code>for</code> comprehensions, as in the example below:</p>
        <pre><code class="nohighlight"><span class="keyword">class</span><span> </span><span class="type-name">Money</span><span> { </span><span class="comment">/* ... */</span><span> }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">findUserById</span><span>(</span><span class="identifier">userId</span><span>: </span><span class="type-name">Long</span><span>): </span><span class="type-name">OptionT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">User</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">findAccountById</span><span>(</span><span class="identifier">accountId</span><span>: </span><span class="type-name">Long</span><span>): </span><span class="type-name">OptionT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">Account</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">getReservedFundsForAccount</span><span>(</span><span class="identifier">account</span><span>: </span><span class="type-name">Account</span><span>): </span><span class="type-name">OptionT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">Money</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">getReservedFundsForUser</span><span>(</span><span class="identifier">userId</span><span>: </span><span class="type-name">Long</span><span>): </span><span class="type-name">OptionT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">Money</span><span>] = </span><span class="keyword">for</span><span> {
  </span><span class="identifier">user</span><span> &lt;- </span><span class="identifier">findUserById</span><span>(</span><span class="identifier">userId</span><span>)
  </span><span class="identifier">account</span><span> &lt;- </span><span class="identifier">findAccountById</span><span>(</span><span class="identifier">user</span><span>.</span><span class="identifier">accountId</span><span>)
  </span><span class="identifier">funds</span><span> &lt;- </span><span class="identifier">getReservedFundsForAccount</span><span>(</span><span class="identifier">account</span><span>)
} </span><span class="keyword">yield</span><span> </span><span class="identifier">funds</span></code></pre>
        <p>The <code>OptionT[Future, Money]</code> instance returned by <code>getReservedFundsForUser</code> will enclose a <code>None</code> value if any of the three composed methods returns an <code>OptionT</code> corresponding to <code>None</code>.
        Otherwise, if the result of all three calls contains <code>Some</code>, the final outcome will also contain <code>Some</code>.</p>
        
        <h2 id="eithert" class="section"><a class="anchor-link left" href="#eithert"><i class="icofont-laika link">&#xef71;</i></a>EitherT</h2>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">data</span><span>.</span><span class="type-name">EitherT</span></code></pre>
        <p><a href="datatypes/eithert.html"><code>EitherT[F, A, B]</code></a> is the monad transformer for <code>Either</code> — you can think of it as a wrapper over a <code>F[Either[A, B]]</code> value.</p>
        <p>Just as in the above section, I simplified the method headers, skipping type parameters or their context bounds and lower bounds.</p>
        <p>Let&#39;s have a quick look at how to create an <code>EitherT</code> instance:</p>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Takes</th>
              <th>Returns</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>EitherT.apply</code> or <code>EitherT(...)</code></td>
              <td><code>F[Either[A, B]]</code></td>
              <td><code>EitherT[F, A, B]</code></td>
            </tr>
            <tr>
              <td><code>EitherT.fromEither</code></td>
              <td><code>Either[A, B]</code></td>
              <td><code>EitherT[F, A, B]</code> (wraps the provided <code>Either</code> value into <code>F</code>)</td>
            </tr>
            <tr>
              <td><code>EitherT.right</code> or <code>EitherT.liftF</code></td>
              <td><code>F[B]</code></td>
              <td><code>EitherT[F, A, B]</code> (wraps value inside <code>F[B]</code> into <code>Right</code>)</td>
            </tr>
            <tr>
              <td><code>EitherT.left</code></td>
              <td><code>F[A]</code></td>
              <td><code>EitherT[F, A, B]</code> (wraps value inside <code>F[B]</code> into <code>Left</code>)</td>
            </tr>
            <tr>
              <td><code>EitherT.pure</code></td>
              <td><code>A</code></td>
              <td><code>EitherT[F, A, B]</code> (wraps value into <code>Right</code> and then into <code>F</code>)</td>
            </tr>
          </tbody>
        </table>
        <p>Another useful way to construct an <code>EitherT</code> instance is to use <code>OptionT</code>&#39;s methods <code>toLeft</code> and <code>toRight</code>:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">abstract</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">BaseException</span><span>(</span><span class="identifier">message</span><span>: </span><span class="type-name">String</span><span>) </span><span class="keyword">extends</span><span> </span><span class="type-name">Exception</span><span>(</span><span class="identifier">message</span><span>)

</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">UserNotFoundException</span><span>(</span><span class="identifier">message</span><span>: </span><span class="type-name">String</span><span>) </span><span class="keyword">extends</span><span> </span><span class="type-name">BaseException</span><span>(</span><span class="identifier">message</span><span>)

</span><span class="keyword">def</span><span> </span><span class="declaration-name">getUserById</span><span>(</span><span class="identifier">userId</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">User</span><span>]] = { </span><span class="comment">/* ... */</span><span> ??? }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">ensureUserExists</span><span>(</span><span class="identifier">userId</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">EitherT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">BaseException</span><span>, </span><span class="type-name">User</span><span>] = {
  </span><span class="type-name">OptionT</span><span>(</span><span class="identifier">getUserById</span><span>(</span><span class="identifier">userId</span><span>))
    .</span><span class="identifier">toRight</span><span>(</span><span class="identifier">left</span><span> = </span><span class="type-name">UserNotFoundException</span><span>(</span><span class="string-literal">s&quot;user not found, userId=</span><span class="substitution">$userId</span><span class="string-literal">&quot;</span><span>))
}</span></code></pre>
        <p><code>toRight</code> is pretty analogous to the method <code>Either.fromOption</code> mentioned before: just as <code>fromOption</code> built an <code>Either</code> from an <code>Option</code>, <code>toRight</code> creates an <code>EitherT</code> from an <code>OptionT</code>.
        If the original <code>OptionT</code> stores <code>Some</code> value, it will be wrapped into <code>Right</code>; otherwise the value provided as the <code>left</code> parameter will be wrapped into a <code>Left</code>.
        To provide the <code>left</code> value within the monad, there is corresponding <code>toRightF</code> method.</p>
        <p><code>toLeft</code> is <code>toRight</code>&#39;s counterpart which wraps the <code>Some</code> value into <code>Left</code> and transforms <code>None</code> into <code>Right</code> enclosing the provided <code>right</code> value.
        This is less commonly used in practice, but can serve e.g. for enforcing uniqueness checks in code.
        We return <code>Left</code> if the value has been found, and <code>Right</code> if it doesn&#39;t yet exist in the system.</p>
        <p>The methods available in <code>EitherT</code> are pretty similar to those we&#39;ve seen in <code>OptionT</code>, but there are some notable differences.</p>
        <p>You might get into some confusion at first when it comes to e.g. <code>map</code>.
        In the case of <code>OptionT</code>, it was pretty obvious what should be done: <code>map</code> should go over the <code>Option</code> enclosed within <code>Future</code>, and then map the enclosed <code>Option</code> itself.
        This is slightly less obvious in case of <code>EitherT</code>: should it map over both <code>Left</code> and <code>Right</code> values, or only the <code>Right</code> value?</p>
        <p>The answer is that <code>EitherT</code> is <em>right-biased</em>, therefore plain <code>map</code> actually deals with the <code>Right</code> value.
        This is unlike <code>Either</code> in the Scala standard library up to 2.11, which is in turn <em>unbiased</em>: there&#39;s no <code>map</code> available in <code>Either</code>, only for its left and right projections.</p>
        <p>Having said that, let&#39;s take a quick look at the right-biased methods that <code>EitherT</code> offers:</p>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Takes</th>
              <th>Returns</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>map[D]</code></td>
              <td><code>B =&gt; D</code></td>
              <td><code>EitherT[F, A, D]</code></td>
            </tr>
            <tr>
              <td><code>subflatMap[D]</code></td>
              <td><code>B =&gt; Either[A, D]</code></td>
              <td><code>EitherT[F, A, D]</code></td>
            </tr>
            <tr>
              <td><code>semiflatMap[D]</code></td>
              <td><code>B =&gt; F[D]</code></td>
              <td><code>EitherT[F, A, D]</code></td>
            </tr>
            <tr>
              <td><code>flatMapF[D]</code></td>
              <td><code>B =&gt; F[Either[A, D]]</code></td>
              <td><code>EitherT[F, A, D]</code></td>
            </tr>
            <tr>
              <td><code>flatMap[D]</code></td>
              <td><code>B =&gt; EitherT[F, A, D]</code></td>
              <td><code>EitherT[F, A, D]</code></td>
            </tr>
          </tbody>
        </table>
        <p>As a side note, there are also certain methods in <code>EitherT</code> (that you&#39;re likely to need at some point) which map over the <code>Left</code> value, like <code>leftMap</code>, or over both <code>Left</code> and <code>Right</code> values, like <code>fold</code> or <code>bimap</code>.</p>
        <p><code>EitherT</code> is very useful for fail-fast chained verifications:</p>
        <pre><code class="nohighlight"><span>
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Item</span><span>(</span><span class="identifier">state</span><span>: </span><span class="type-name">String</span><span>)
</span><span class="keyword">class</span><span> </span><span class="type-name">ItemOrder</span><span>  { </span><span class="comment">/* ... */</span><span> }

</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">ItemNotFoundException</span><span>(</span><span class="identifier">message</span><span>: </span><span class="type-name">String</span><span>) </span><span class="keyword">extends</span><span> </span><span class="type-name">BaseException</span><span>(</span><span class="identifier">message</span><span>)
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">InvalidItemStateException</span><span>(</span><span class="identifier">message</span><span>: </span><span class="type-name">String</span><span>) </span><span class="keyword">extends</span><span> </span><span class="type-name">BaseException</span><span>(</span><span class="identifier">message</span><span>)

</span><span class="keyword">def</span><span> </span><span class="declaration-name">getItemById</span><span>(</span><span class="identifier">itemId</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">Option</span><span>[</span><span class="type-name">Item</span><span>]] = { </span><span class="comment">/* .. */</span><span> ??? }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">ensureItemExists</span><span>(</span><span class="identifier">itemId</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">EitherT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">BaseException</span><span>, </span><span class="type-name">Item</span><span>] = {
  </span><span class="type-name">OptionT</span><span>(</span><span class="identifier">getItemById</span><span>(</span><span class="identifier">itemId</span><span>))
    .</span><span class="identifier">toRight</span><span>(</span><span class="type-name">ItemNotFoundException</span><span>(</span><span class="string-literal">s&quot;item not found, itemId = </span><span class="substitution">$itemId</span><span class="string-literal">&quot;</span><span>))
}

</span><span class="keyword">def</span><span> </span><span class="declaration-name">ensureItemStateIs</span><span>(</span><span class="identifier">actual</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">expected</span><span>: </span><span class="type-name">String</span><span>): </span><span class="type-name">EitherT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">BaseException</span><span>, </span><span class="type-name">Unit</span><span>] = {
  </span><span class="comment">// Returns a Unit value wrapped into Right and then into Future if condition is true,
</span><span>  </span><span class="comment">// otherwise the provided exception wrapped into Left and then into Future.
</span><span>  </span><span class="type-name">EitherT</span><span>.</span><span class="identifier">cond</span><span>(</span><span class="identifier">actual</span><span> == </span><span class="identifier">expected</span><span>, (), </span><span class="type-name">InvalidItemStateException</span><span>(</span><span class="string-literal">s&quot;actual=</span><span class="substitution">$actual</span><span class="string-literal">, expected=</span><span class="substitution">$expected</span><span class="string-literal">&quot;</span><span>))
}

</span><span class="keyword">def</span><span> </span><span class="declaration-name">placeOrderForItem</span><span>(</span><span class="identifier">userId</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">itemId</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">count</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Future</span><span>[</span><span class="type-name">ItemOrder</span><span>] = { </span><span class="comment">/* ... */</span><span> ??? }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">buyItem</span><span>(</span><span class="identifier">userId</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">itemId</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">count</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">EitherT</span><span>[</span><span class="type-name">Future</span><span>, </span><span class="type-name">BaseException</span><span>, </span><span class="type-name">ItemOrder</span><span>] = {
  </span><span class="keyword">for</span><span> {
    </span><span class="identifier">user</span><span> &lt;- </span><span class="identifier">ensureUserExists</span><span>(</span><span class="identifier">userId</span><span>)
    </span><span class="identifier">item</span><span> &lt;- </span><span class="identifier">ensureItemExists</span><span>(</span><span class="identifier">itemId</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">ensureItemStateIs</span><span>(</span><span class="identifier">item</span><span>.</span><span class="identifier">state</span><span>, </span><span class="string-literal">&quot;AVAILABLE_IN_STOCK&quot;</span><span>)
    </span><span class="comment">// EitherT.liftF is necessary to make EitherT[Future, BaseException, ItemOrder] out of Future[ItemOrder]
</span><span>    </span><span class="identifier">placedOrder</span><span> &lt;- </span><span class="type-name">EitherT</span><span>.</span><span class="identifier">liftF</span><span>(</span><span class="identifier">placeOrderForItem</span><span>(</span><span class="identifier">userId</span><span>, </span><span class="identifier">itemId</span><span>, </span><span class="identifier">count</span><span>))
  } </span><span class="keyword">yield</span><span> </span><span class="identifier">placedOrder</span><span>
}</span></code></pre>
        <p>In the above example, we&#39;re running various checks against the item one by one.
        If any of the checks fails, the resulting <code>EitherT</code> will contain a <code>Left</code> value.
        Otherwise, if all of the checks yield a <code>Right</code> (of course we mean a <code>Right</code> wrapped into an <code>EitherT</code>), then the final outcome will also contain <code>Right</code>.
        This is a fail-fast behavior: we&#39;re effectively stopping the <code>for</code> comprehension flow at the first <code>Left</code>-ish result.</p>
        <p>If you&#39;re instead looking for validation that accumulates the errors (e.g. when dealing with user-provided form data), <code>cats.data.Validated</code> may be a good choice.</p>
        
        <h1 id="common-issues" class="section"><a class="anchor-link left" href="#common-issues"><i class="icofont-laika link">&#xef71;</i></a>Common issues</h1>
        <p>The Cats type class instances for standard library types are available in implicit scope and hence no longer have to be imported. If anything doesn&#39;t compile as expected, first make sure all the required Cats syntax implicits are in the scope — try importing <code>cats.syntax.all._</code> and see if the problem persists. The only exception is here is Cat&#39;s own <code>Order</code> and <code>PartialOrder</code> type classes which are available by importing <code>cats.implicits._</code>. 
        As mentioned before, though, it&#39;s better to use narrow imports, but if the code doesn&#39;t compile it&#39;s sometimes worth just importing the entire library to check if it solves the problem.</p>
        <p>If you&#39;re using <code>Futures</code>, make sure to provide an implicit <code>ExecutionContext</code> in the scope, otherwise Cats won&#39;t be able to infer implicit instances for <code>Future</code>&#39;s type classes.</p>
        <p>IntelliJ sometimes reports errors in Cats-loaded code even though the source passes under scalac.
        One such example are invocations of the methods of <code>cats.data.Nested</code> class, which compile correctly under scalac, but don&#39;t type check under IntelliJ&#39;s presentation compiler.
        It should work without trouble under <a href="http://scala-ide.org/">Scala IDE</a>, though.</p>
        <p>As an advice for your future learning: the <code>Applicative</code> type class, despite it&#39;s key significance in functional programming, comes slightly difficult to understand.
        In my opinion it&#39;s much less intuitive than <code>Functor</code> or <code>Monad</code>, even though it actually stands right between <code>Functor</code> and <code>Monad</code> in the inheritance hierarchy.
        The best approach to grasp <code>Applicative</code> is to first understand how <code>product</code> (which transforms an <code>F[A]</code> and <code>F[B]</code> to an <code>F[(A, B)]</code>) works rather than focus on the somewhat exotic <code>ap</code> operation itself.</p>

        
<hr class="footer-rule"/>
<footer>
  cats is a <a href="https://typelevel.org/">Typelevel</a> project distributed under the <a href="https://opensource.org/licenses/MIT">MIT</a> license.
</footer>


      </main>

    </div>

  </body>

</html>