<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Const</title>
  
  <meta name="author" content="cats contributors"/>
  
  <meta name="author" content="Cody Allen"/>
  
  <meta name="author" content="Ross Baker"/>
  
  <meta name="author" content="Arman Bilge"/>
  
  <meta name="author" content="P. Oscar Boykin"/>
  
  <meta name="author" content="Travis Brown"/>
  
  <meta name="author" content="Adelbert Chang"/>
  
  <meta name="author" content="Daniel Esik"/>
  
  <meta name="author" content="Peter Neyens"/>
  
  <meta name="author" content="Rob Norris"/>
  
  <meta name="author" content="Erik Osheim"/>
  
  <meta name="author" content="LukaJCB"/>
  
  <meta name="author" content="Michael Pilquist"/>
  
  <meta name="author" content="Miles Sabin"/>
  
  <meta name="author" content="Daniel Spiewak"/>
  
  <meta name="author" content="Frank Thomas"/>
  
  <meta name="author" content="Sergey Torgashov"/>
  
  <meta name="author" content="Julien Truffaut"/>
  
  <meta name="author" content="Kailuo Wang"/>
  
  
  <meta name="description" content="docs"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../helium/site/laika-helium.css" />
  <script src="../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="https://typelevel.org"><img src="https://typelevel.org/img/logo.svg"></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://www.javadoc.io/doc/org.typelevel/cats-docs_2.13/2.11.0/"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://github.com/typelevel/cats"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://www.javadoc.io/doc/org.typelevel/cats-docs_2.13/2.11.0/"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://github.com/typelevel/cats"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../">Cats</a></li>
    <li class="level1 nav-leaf"><a href="../typeclasses.html">Type Classes</a></li>
    <li class="level1 nav-leaf"><a href="../datatypes.html">Data Types</a></li>
    <li class="level1 nav-leaf"><a href="../algebra.html">Algebra</a></li>
    <li class="level1 nav-leaf"><a href="../alleycats.html">Alleycats</a></li>
    <li class="level1 nav-leaf"><a href="../motivations.html">Motivations</a></li>
    <li class="level1 nav-leaf"><a href="../resources_for_learners.html">Resources for Learners</a></li>
    <li class="level1 nav-leaf"><a href="../jump_start_guide.html">Jump Start Guide</a></li>
    <li class="level1 nav-leaf"><a href="../imports.html">Imports</a></li>
    <li class="level1 nav-leaf"><a href="../faq.html">FAQ</a></li>
    <li class="level1 nav-leaf"><a href="../CONTRIBUTING.html">Contributor guide</a></li>
    <li class="level1 nav-leaf"><a href="../ADOPTERS.html">Adopters</a></li>
    <li class="level1 nav-leaf"><a href="../colophon.html">Colophon</a></li>
    <li class="level1 nav-leaf"><a href="../nomenclature.html">Glossary</a></li>
    <li class="level1 nav-leaf"><a href="../guidelines.html">Guidelines</a></li>
    <li class="level1 nav-leaf"><a href="../typelevelEcosystem.html">Typelevel Ecosystem</a></li>
    <li class="level1 nav-header">Type Classes</li>
    <li class="level2 nav-leaf"><a href="../typeclasses/alternative.html">Alternative</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/applicative.html">Applicative</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/applicativemonaderror.html">ApplicativeError and MonadError</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/applicativetraverse.html">Applicative and Traversable Functors</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/arrow.html">Arrow</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/arrowchoice.html">Arrow Choice</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/bifoldable.html">Bifoldable</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/bifunctor.html">Bifunctor</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/bimonad.html">Bimonad</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/comonad.html">Comonad</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/contravariant.html">Contravariant</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/contravariantmonoidal.html">Contravariant Monoidal</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/eq.html">Eq</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/foldable.html">Foldable</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/functor.html">Functor</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/invariant.html">Invariant</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/invariantmonoidal.html">Invariant Monoidal</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/lawtesting.html">Law testing</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/monad.html">Monad</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/monoid.html">Monoid</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/monoidk.html">MonoidK</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/nonemptytraverse.html">NonEmptyTraverse</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/parallel.html">Parallel</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/reducible.html">Reducible</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/semigroup.html">Semigroup</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/semigroupk.html">SemigroupK</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/show.html">Show</a></li>
    <li class="level2 nav-leaf"><a href="../typeclasses/traverse.html">Traverse</a></li>
    <li class="level1 nav-header">Data Types</li>
    <li class="level2 nav-leaf"><a href="chain.html">Chain</a></li>
    <li class="level2 active nav-leaf"><a href="#">Const</a></li>
    <li class="level2 nav-leaf"><a href="contt.html">ContT</a></li>
    <li class="level2 nav-leaf"><a href="eithert.html">EitherT</a></li>
    <li class="level2 nav-leaf"><a href="eval.html">Eval</a></li>
    <li class="level2 nav-leaf"><a href="freeapplicative.html">Free Applicative</a></li>
    <li class="level2 nav-leaf"><a href="freemonad.html">Free Monad</a></li>
    <li class="level2 nav-leaf"><a href="functionk.html">FunctionK</a></li>
    <li class="level2 nav-leaf"><a href="id.html">Id</a></li>
    <li class="level2 nav-leaf"><a href="ior.html">Ior</a></li>
    <li class="level2 nav-leaf"><a href="iort.html">IorT</a></li>
    <li class="level2 nav-leaf"><a href="kleisli.html">Kleisli</a></li>
    <li class="level2 nav-leaf"><a href="nel.html">NonEmptyList</a></li>
    <li class="level2 nav-leaf"><a href="nested.html">Nested</a></li>
    <li class="level2 nav-leaf"><a href="oneand.html">OneAnd</a></li>
    <li class="level2 nav-leaf"><a href="optiont.html">OptionT</a></li>
    <li class="level2 nav-leaf"><a href="state.html">State</a></li>
    <li class="level2 nav-leaf"><a href="statet.html">StateT</a></li>
    <li class="level2 nav-leaf"><a href="validated.html">Validated</a></li>
    <li class="level2 nav-leaf"><a href="writer.html">Writer</a></li>
    <li class="level2 nav-leaf"><a href="writert.html">WriterT</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Const</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#thinking-about-const">Thinking about <code>Const</code></a></li>
    <li class="level1 nav-node"><a href="#why-do-we-care">Why do we care?</a></li>
    <li class="level2 nav-leaf"><a href="#example-1-lens">Example 1: Lens</a></li>
    <li class="level2 nav-leaf"><a href="#example-2-traverse">Example 2: Traverse</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="const" class="title">Const</h1>
        <p>API Documentation: <a class="api" href="https://www.javadoc.io/doc/org.typelevel/cats-docs_2.13/2.11.0/cats/data/Const.html">Const</a></p>
        <p>At first glance <code>Const</code> seems like a strange data type - it has two type parameters, yet only
        stores a value of the first type. What possible use is it? As it turns out, it does
        have its uses, which serve as a nice example of the consistency and elegance of functional programming.</p>
        
        <h2 id="thinking-about-const" class="section"><a class="anchor-link left" href="#thinking-about-const"><i class="icofont-laika link">&#xef71;</i></a>Thinking about <code>Const</code></h2>
        <p>The <code>Const</code> data type can be thought of similarly to the <code>const</code> function, but as a data type.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">const</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span>](</span><span class="identifier">a</span><span>: </span><span class="type-name">A</span><span>)(</span><span class="identifier">b</span><span>: =&gt; </span><span class="type-name">B</span><span>): </span><span class="type-name">A</span><span> = </span><span class="identifier">a</span></code></pre>
        <p>The <code>const</code> function takes two arguments and simply returns the first argument, ignoring the second.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Const</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span>](</span><span class="identifier">getConst</span><span>: </span><span class="type-name">A</span><span>)</span></code></pre>
        <p>The <code>Const</code> data type takes two type parameters, but only ever stores a value of the first type parameter.
        Because the second type parameter is not used in the data type, the type parameter is referred to as a
        &quot;phantom type&quot;.</p>
        
        <h2 id="why-do-we-care" class="section"><a class="anchor-link left" href="#why-do-we-care"><i class="icofont-laika link">&#xef71;</i></a>Why do we care?</h2>
        <p>It would seem <code>Const</code> gives us no benefit over a data type that would simply not have the second type parameter.
        However, while we don&#39;t directly use the second type parameter, its existence becomes useful in certain contexts.</p>
        
        <h3 id="example-1-lens" class="section"><a class="anchor-link left" href="#example-1-lens"><i class="icofont-laika link">&#xef71;</i></a>Example 1: Lens</h3>
        <p>The following is heavily inspired by <a href="https://github.com/julien-truffaut">Julien Truffaut</a>&#39;s
        <a href="http://functional-wizardry.blogspot.co.uk/2014/02/lens-implementation-part-1.html">blog post</a> on
        <a href="https://github.com/julien-truffaut/Monocle">Monocle</a>, a fully-fledged optics library in Scala.</p>
        <p>Types that contain other types are common across many programming paradigms. It is of course desirable in many
        cases to get out members of other types, or to set them. In traditional object-oriented programming this is
        handled by getter and setter methods on the outer object. In functional programming, a popular solution is
        to use a lens.</p>
        <p>A lens can be thought of as a first class getter/setter. A <code>Lens[S, A]</code> is a data type that knows how to get
        an <code>A</code> out of an <code>S</code>, or set an <code>A</code> in an <code>S</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">trait</span><span> </span><span class="type-name">Lens</span><span>[</span><span class="type-name">S</span><span>, </span><span class="type-name">A</span><span>] {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">get</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>): </span><span class="type-name">A</span><span>

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">set</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>, </span><span class="identifier">a</span><span>: </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span>

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modify</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span> =
    </span><span class="identifier">set</span><span>(</span><span class="identifier">s</span><span>, </span><span class="identifier">f</span><span>(</span><span class="identifier">get</span><span>(</span><span class="identifier">s</span><span>)))
}</span></code></pre>
        <p>It can be useful to have effectful modifications as well - perhaps our modification can fail (<code>Option</code>) or
        can return several values (<code>List</code>).</p>
        <pre><code class="nohighlight"><span class="keyword">trait</span><span> </span><span class="type-name">Lens</span><span>[</span><span class="type-name">S</span><span>, </span><span class="type-name">A</span><span>] {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">get</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>): </span><span class="type-name">A</span><span>

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">set</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>, </span><span class="identifier">a</span><span>: </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span>

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modify</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span> =
    </span><span class="identifier">set</span><span>(</span><span class="identifier">s</span><span>, </span><span class="identifier">f</span><span>(</span><span class="identifier">get</span><span>(</span><span class="identifier">s</span><span>)))

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modifyOption</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">Option</span><span>[</span><span class="type-name">A</span><span>]): </span><span class="type-name">Option</span><span>[</span><span class="type-name">S</span><span>] =
    </span><span class="identifier">f</span><span>(</span><span class="identifier">get</span><span>(</span><span class="identifier">s</span><span>)).</span><span class="identifier">map</span><span>(</span><span class="identifier">a</span><span> =&gt; </span><span class="identifier">set</span><span>(</span><span class="identifier">s</span><span>, </span><span class="identifier">a</span><span>))

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modifyList</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">List</span><span>[</span><span class="type-name">A</span><span>]): </span><span class="type-name">List</span><span>[</span><span class="type-name">S</span><span>] =
    </span><span class="identifier">f</span><span>(</span><span class="identifier">get</span><span>(</span><span class="identifier">s</span><span>)).</span><span class="identifier">map</span><span>(</span><span class="identifier">a</span><span> =&gt; </span><span class="identifier">set</span><span>(</span><span class="identifier">s</span><span>, </span><span class="identifier">a</span><span>))
}</span></code></pre>
        <p>Note that both <code>modifyOption</code> and <code>modifyList</code> share the <em>exact</em> same implementation. If we look closely, the
        only thing we need is a <code>map</code> operation on the data type. Being good functional programmers, we abstract.</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="type-name">Functor</span><span>
</span><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">syntax</span><span>.</span><span class="identifier">all</span><span>.</span><span class="identifier">_</span><span>

</span><span class="keyword">trait</span><span> </span><span class="type-name">Lens</span><span>[</span><span class="type-name">S</span><span>, </span><span class="type-name">A</span><span>] {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">get</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>): </span><span class="type-name">A</span><span>

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">set</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>, </span><span class="identifier">a</span><span>: </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span>

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modify</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span> =
    </span><span class="identifier">set</span><span>(</span><span class="identifier">s</span><span>, </span><span class="identifier">f</span><span>(</span><span class="identifier">get</span><span>(</span><span class="identifier">s</span><span>)))

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modifyF</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>] : </span><span class="type-name">Functor</span><span>](</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>]): </span><span class="type-name">F</span><span>[</span><span class="type-name">S</span><span>] =
    </span><span class="identifier">f</span><span>(</span><span class="identifier">get</span><span>(</span><span class="identifier">s</span><span>)).</span><span class="identifier">map</span><span>(</span><span class="identifier">a</span><span> =&gt; </span><span class="identifier">set</span><span>(</span><span class="identifier">s</span><span>, </span><span class="identifier">a</span><span>))
}</span></code></pre>
        <p>We can redefine <code>modify</code> in terms of <code>modifyF</code> by using <code>cats.Id</code>. We can also treat <code>set</code> as a modification
        that simply ignores the current value. Due to these modifications however, we must leave <code>modifyF</code> abstract
        since having it defined in terms of <code>set</code> would lead to infinite circular calls.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="type-name">Id</span><span>

</span><span class="keyword">trait</span><span> </span><span class="type-name">Lens</span><span>[</span><span class="type-name">S</span><span>, </span><span class="type-name">A</span><span>] {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modifyF</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>] : </span><span class="type-name">Functor</span><span>](</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>]): </span><span class="type-name">F</span><span>[</span><span class="type-name">S</span><span>]

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">set</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>, </span><span class="identifier">a</span><span>: </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span> = </span><span class="identifier">modify</span><span>(</span><span class="identifier">s</span><span>)(</span><span class="identifier">_</span><span> =&gt; </span><span class="identifier">a</span><span>)

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modify</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span> = </span><span class="identifier">modifyF</span><span>[</span><span class="type-name">Id</span><span>](</span><span class="identifier">s</span><span>)(</span><span class="identifier">f</span><span>)

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">get</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>): </span><span class="type-name">A</span><span>
}</span></code></pre>
        <p>What about <code>get</code>? Certainly we can&#39;t define <code>get</code> in terms of the others.. the others are to modify an existing
        value, whereas <code>get</code> is to retrieve it. Let&#39;s give it a shot anyways.</p>
        <p>Looking at <code>modifyF</code>, we have an <code>S</code> we can pass in. The tricky part will be the <code>A =&gt; F[A]</code>, and then somehow
        getting an <code>A</code> out of <code>F[S]</code>. If we imagine <code>F</code> to be a type-level constant function however, we could imagine
        it would simply take any type and return some other constant type, an <code>A</code> perhaps. This suggests our <code>F</code> is a
        <code>Const</code>.</p>
        <p>We then take a look at the fact that <code>modifyF</code> takes an <code>F[_]</code>, a type constructor that takes a single type parameter.
        <code>Const</code> takes two, so we must fix one. The function returns an <code>F[S]</code>, but we want an <code>A</code>, which implies we
        have the first type parameter fixed to <code>A</code> and leave the second one free for the function to fill in as it wants.</p>
        <p>Substituting in <code>Const[A, _]</code> wherever we see <code>F[_]</code>, the function wants an <code>A =&gt; Const[A, A]</code> and will give us back
        a <code>Const[A, S]</code>. Looking at the definition of <code>Const</code>, we see that we only ever have a value of the first type parameter
        and completely ignore the second. Therefore, we can treat any <code>Const[X, Y]</code> value as equivalent to <code>X</code> (plus or minus
        some wrapping into <code>Const</code>). This leaves us with needing a function <code>A =&gt; A</code>. Given the type, the only thing we can do
        is to take an <code>A</code> and return it right back (lifted into <code>Const</code>).</p>
        <p>Before we plug and play however, note that <code>modifyF</code> has a <code>Functor</code> constraint on <code>F[_]</code>. This means we need to
        define a <code>Functor</code> instance for <code>Const</code>, where the first type parameter is fixed.</p>
        <p><em>Note</em>: the example below assumes usage of the <a href="https://github.com/typelevel/kind-projector">kind-projector compiler plugin</a> and will not compile if it is not being used in a project.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="type-name">Functor</span><span>
</span><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">data</span><span>.</span><span class="type-name">Const</span><span>

</span><span class="keyword">implicit</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">constFunctor</span><span>[</span><span class="type-name">X</span><span>]: </span><span class="type-name">Functor</span><span>[</span><span class="type-name">Const</span><span>[</span><span class="type-name">X</span><span>, *]] =
  </span><span class="keyword">new</span><span> </span><span class="type-name">Functor</span><span>[</span><span class="type-name">Const</span><span>[</span><span class="type-name">X</span><span>, *]] {
    </span><span class="comment">// Recall Const[X, A] ~= X, so the function is not of any use to us
</span><span>    </span><span class="keyword">def</span><span> </span><span class="declaration-name">map</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span>](</span><span class="identifier">fa</span><span>: </span><span class="type-name">Const</span><span>[</span><span class="type-name">X</span><span>, </span><span class="type-name">A</span><span>])(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">B</span><span>): </span><span class="type-name">Const</span><span>[</span><span class="type-name">X</span><span>, </span><span class="type-name">B</span><span>] =
      </span><span class="type-name">Const</span><span>(</span><span class="identifier">fa</span><span>.</span><span class="identifier">getConst</span><span>)
  }</span></code></pre>
        <p>Now that that&#39;s taken care of, let&#39;s substitute and see what happens.</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="type-name">Id</span><span>

</span><span class="keyword">trait</span><span> </span><span class="type-name">Lens</span><span>[</span><span class="type-name">S</span><span>, </span><span class="type-name">A</span><span>] {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modifyF</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>] : </span><span class="type-name">Functor</span><span>](</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>]): </span><span class="type-name">F</span><span>[</span><span class="type-name">S</span><span>]

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">set</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>, </span><span class="identifier">a</span><span>: </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span> = </span><span class="identifier">modify</span><span>(</span><span class="identifier">s</span><span>)(</span><span class="identifier">_</span><span> =&gt; </span><span class="identifier">a</span><span>)

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">modify</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>)(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">A</span><span>): </span><span class="type-name">S</span><span> = </span><span class="identifier">modifyF</span><span>[</span><span class="type-name">Id</span><span>](</span><span class="identifier">s</span><span>)(</span><span class="identifier">f</span><span>)

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">get</span><span>(</span><span class="identifier">s</span><span>: </span><span class="type-name">S</span><span>): </span><span class="type-name">A</span><span> = {
    </span><span class="keyword">val</span><span> </span><span class="identifier">storedValue</span><span> = </span><span class="identifier">modifyF</span><span>[</span><span class="type-name">Const</span><span>[</span><span class="type-name">A</span><span>, *]](</span><span class="identifier">s</span><span>)(</span><span class="identifier">a</span><span> =&gt; </span><span class="type-name">Const</span><span>(</span><span class="identifier">a</span><span>))
    </span><span class="identifier">storedValue</span><span>.</span><span class="identifier">getConst</span><span>
  }
}</span></code></pre>
        <p>It works! We get a <code>Const[A, S]</code> out on the other side, and we simply just retrieve the <code>A</code> value stored inside.</p>
        <p>What&#39;s going on here? We can treat the effectful &quot;modification&quot; we are doing as a store operation - we take an <code>A</code>
        and store it inside a <code>Const</code>. Knowing only <code>F[_]</code> has a <code>Functor</code> instance, it can only <code>map</code> over the <code>Const</code>
        which will do nothing to the stored value. After <code>modifyF</code> is done getting the new <code>S</code>, we retrieve the stored <code>A</code>
        value and we&#39;re done!</p>
        
        <h3 id="example-2-traverse" class="section"><a class="anchor-link left" href="#example-2-traverse"><i class="icofont-laika link">&#xef71;</i></a>Example 2: Traverse</h3>
        <p>In the popular <a href="https://www.cs.ox.ac.uk/jeremy.gibbons/publications/iterator.pdf">The Essence of the Iterator Pattern</a>
        paper, Jeremy Gibbons and Bruno C. d. S. Oliveria describe a functional approach to iterating over a collection of
        data. Among the abstractions presented are <code>Foldable</code> and <code>Traverse</code>, replicated below (also available in Cats).</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.{</span><span class="type-name">Applicative</span><span>, </span><span class="type-name">Monoid</span><span>}

</span><span class="keyword">trait</span><span> </span><span class="type-name">Foldable</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>]] {
  </span><span class="comment">// Given a collection of data F[A], and a function mapping each A to a B where B has a Monoid instance,
</span><span>  </span><span class="comment">// reduce the collection down to a single B value using the monoidal behavior of B
</span><span>  </span><span class="keyword">def</span><span> </span><span class="declaration-name">foldMap</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span> : </span><span class="type-name">Monoid</span><span>](</span><span class="identifier">fa</span><span>: </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>])(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">B</span><span>): </span><span class="type-name">B</span><span>
}

</span><span class="keyword">trait</span><span> </span><span class="type-name">Traverse</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>]] {
  </span><span class="comment">// Given a collection of data F[A], for each value apply the function f which returns an effectful
</span><span>  </span><span class="comment">// value. The result of traverse is the composition of all these effectful values.
</span><span>  </span><span class="keyword">def</span><span> </span><span class="declaration-name">traverse</span><span>[</span><span class="type-name">G</span><span>[</span><span class="identifier">_</span><span>] : </span><span class="type-name">Applicative</span><span>, </span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span>](</span><span class="identifier">fa</span><span>: </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>])(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">G</span><span>[</span><span class="type-name">B</span><span>]): </span><span class="type-name">G</span><span>[</span><span class="type-name">F</span><span>[</span><span class="type-name">B</span><span>]]
}</span></code></pre>
        <p>These two type classes seem unrelated - one reduces a collection down to a single value, the other traverses
        a collection with an effectful function, collecting results. It may be surprising to see that in fact <code>Traverse</code>
        subsumes <code>Foldable</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">trait</span><span> </span><span class="type-name">Traverse</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>]] </span><span class="keyword">extends</span><span> </span><span class="type-name">Foldable</span><span>[</span><span class="type-name">F</span><span>] {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">traverse</span><span>[</span><span class="type-name">G</span><span>[</span><span class="identifier">_</span><span>] : </span><span class="type-name">Applicative</span><span>, </span><span class="type-name">A</span><span>, </span><span class="type-name">X</span><span>](</span><span class="identifier">fa</span><span>: </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>])(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">G</span><span>[</span><span class="type-name">X</span><span>]): </span><span class="type-name">G</span><span>[</span><span class="type-name">F</span><span>[</span><span class="type-name">X</span><span>]]

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">foldMap</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span> : </span><span class="type-name">Monoid</span><span>](</span><span class="identifier">fa</span><span>: </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>])(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">B</span><span>): </span><span class="type-name">B</span><span>
}</span></code></pre>
        <p>To start, we observe that if we are to implement <code>foldMap</code> in terms of <code>traverse</code>, we will want a <code>B</code> out
        at some point. However, <code>traverse</code> returns a <code>G[F[X]]</code>. It would seem there is no way to unify these two.
        However, if we imagine <code>G[_]</code> to be a sort of type-level constant function, where the fact that it&#39;s taking a
        <code>F[X]</code> is irrelevant to the true underlying value, we can begin to see how we might be able to pull this off.</p>
        <p><code>traverse</code> however wants <code>G[_]</code> to have an <code>Applicative</code> instance, so let&#39;s define one for <code>Const</code>. Since
        <code>F[X]</code> is the value we want to ignore, we treat it as the second type parameter and hence, leave it as the free
        one.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">data</span><span>.</span><span class="type-name">Const</span><span>

</span><span class="keyword">implicit</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">constApplicative</span><span>[</span><span class="type-name">Z</span><span>]: </span><span class="type-name">Applicative</span><span>[</span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, *]] =
  </span><span class="keyword">new</span><span> </span><span class="type-name">Applicative</span><span>[</span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, *]] {
    </span><span class="keyword">def</span><span> </span><span class="declaration-name">pure</span><span>[</span><span class="type-name">A</span><span>](</span><span class="identifier">a</span><span>: </span><span class="type-name">A</span><span>): </span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, </span><span class="type-name">A</span><span>] = ???

    </span><span class="keyword">def</span><span> </span><span class="declaration-name">ap</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span>](</span><span class="identifier">f</span><span>: </span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">B</span><span>])(</span><span class="identifier">fa</span><span>: </span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, </span><span class="type-name">A</span><span>]): </span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, </span><span class="type-name">B</span><span>] = ???
  }</span></code></pre>
        <p>Recall that <code>Const[Z, A]</code> means we have a <code>Z</code> value in hand, and don&#39;t really care about the <code>A</code> type parameter.
        Therefore we can more or less treat the type <code>Const[Z, A]</code> as just <code>Z</code>.</p>
        <p>In functions <code>pure</code> and <code>ap</code> we have a problem. In <code>pure</code>, we have an <code>A</code> value, but want to return a <code>Z</code> value. We have
        no function <code>A =&gt; Z</code>, so our only option is to completely ignore the <code>A</code> value. But we still don&#39;t have a <code>Z</code>! Let&#39;s
        put that aside for now, but still keep it in the back of our minds.</p>
        <p>In <code>ap</code> we have two <code>Z</code> values, and want to return a <code>Z</code> value. We could certainly return one or the other, but we
        should try to do something more useful. This suggests composition of <code>Z</code>s, which we don&#39;t know how to do.</p>
        <p>So now we need a constant <code>Z</code> value, and a binary function that takes two <code>Z</code>s and produces a <code>Z</code>. Sound familiar?
        We want <code>Z</code> to have a <code>Monoid</code> instance!</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">implicit</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">constApplicative</span><span>[</span><span class="type-name">Z</span><span> : </span><span class="type-name">Monoid</span><span>]: </span><span class="type-name">Applicative</span><span>[</span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, *]] =
  </span><span class="keyword">new</span><span> </span><span class="type-name">Applicative</span><span>[</span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, *]] {
    </span><span class="keyword">def</span><span> </span><span class="declaration-name">pure</span><span>[</span><span class="type-name">A</span><span>](</span><span class="identifier">a</span><span>: </span><span class="type-name">A</span><span>): </span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, </span><span class="type-name">A</span><span>] = </span><span class="type-name">Const</span><span>(</span><span class="type-name">Monoid</span><span>[</span><span class="type-name">Z</span><span>].</span><span class="identifier">empty</span><span>)

    </span><span class="keyword">def</span><span> </span><span class="declaration-name">ap</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span>](</span><span class="identifier">f</span><span>: </span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">B</span><span>])(</span><span class="identifier">fa</span><span>: </span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, </span><span class="type-name">A</span><span>]): </span><span class="type-name">Const</span><span>[</span><span class="type-name">Z</span><span>, </span><span class="type-name">B</span><span>] =
      </span><span class="type-name">Const</span><span>(</span><span class="type-name">Monoid</span><span>[</span><span class="type-name">Z</span><span>].</span><span class="identifier">combine</span><span>(</span><span class="identifier">fa</span><span>.</span><span class="identifier">getConst</span><span>, </span><span class="identifier">f</span><span>.</span><span class="identifier">getConst</span><span>))
  }</span></code></pre>
        <p>We have our <code>Applicative</code>!</p>
        <p>Going back to <code>Traverse</code>, we fill in the first parameter of <code>traverse</code> with <code>fa</code> since that&#39;s
        the only value that fits.</p>
        <p>Now we need a <code>A =&gt; G[B]</code>. We have an <code>A =&gt; B</code>, and we&#39;ve decided to use <code>Const</code> for our <code>G[_]</code>. We need to
        fix the first parameter of <code>Const</code> since <code>Const</code> takes two type parameters and <code>traverse</code> wants a type constructor
        which only takes one. The first type parameter which will be the type of the actual values we store, and therefore will
        be the type of the value we get out at the end, so we leave the second one free, similar to the <code>Applicative</code> instance.
        We don&#39;t care about the second type parameter and there are no restrictions on it, so we can just use <code>Nothing</code>,
        the type that has no values.</p>
        <p>So to summarize, what we want is a function <code>A =&gt; Const[B, Nothing]</code>, and we have a function <code>A =&gt; B</code>. Recall
        that <code>Const[B, Z]</code> (for any <code>Z</code>) is the moral equivalent of just <code>B</code>, so <code>A =&gt; Const[B, Nothing]</code> is equivalent
        to <code>A =&gt; B</code>, which is exactly what we have, we just need to wrap it.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">trait</span><span> </span><span class="type-name">Traverse</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>]] </span><span class="keyword">extends</span><span> </span><span class="type-name">Foldable</span><span>[</span><span class="type-name">F</span><span>] {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">traverse</span><span>[</span><span class="type-name">G</span><span>[</span><span class="identifier">_</span><span>] : </span><span class="type-name">Applicative</span><span>, </span><span class="type-name">A</span><span>, </span><span class="type-name">X</span><span>](</span><span class="identifier">fa</span><span>: </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>])(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">G</span><span>[</span><span class="type-name">X</span><span>]): </span><span class="type-name">G</span><span>[</span><span class="type-name">F</span><span>[</span><span class="type-name">X</span><span>]]

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">foldMap</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">B</span><span> : </span><span class="type-name">Monoid</span><span>](</span><span class="identifier">fa</span><span>: </span><span class="type-name">F</span><span>[</span><span class="type-name">A</span><span>])(</span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">B</span><span>): </span><span class="type-name">B</span><span> = {
    </span><span class="keyword">val</span><span> </span><span class="identifier">const</span><span>: </span><span class="type-name">Const</span><span>[</span><span class="type-name">B</span><span>, </span><span class="type-name">F</span><span>[</span><span class="type-name">Nothing</span><span>]] = </span><span class="identifier">traverse</span><span>[</span><span class="type-name">Const</span><span>[</span><span class="type-name">B</span><span>, *], </span><span class="type-name">A</span><span>, </span><span class="type-name">Nothing</span><span>](</span><span class="identifier">fa</span><span>)(</span><span class="identifier">a</span><span> =&gt; </span><span class="type-name">Const</span><span>(</span><span class="identifier">f</span><span>(</span><span class="identifier">a</span><span>)))
    </span><span class="identifier">const</span><span>.</span><span class="identifier">getConst</span><span>
  }
}</span></code></pre>
        <p>Hurrah!</p>
        <p>What&#39;s happening here? We can see <code>traverse</code> is a function that goes over a collection, applying an
        effectful function to each value, and combining all of these effectful values. In our case, the effect
        is mapping each value to a value of type <code>B</code>, where we know how to combine <code>B</code>s via its <code>Monoid</code> instance.
        The <code>Monoid</code> instance is exactly what is used when <code>traverse</code> goes to collect the effectful values together.
        Should the <code>F[A]</code> be &quot;empty&quot;, it can use <code>Monoid#empty</code> as a value to return back.</p>
        <p>Pretty nifty. <code>traverse</code>-ing over a collection with an effectful function is more general than traversing
        over a collection to reduce it down to a single value.</p>

        
<hr class="footer-rule"/>
<footer>
  cats is a <a href="https://typelevel.org/">Typelevel</a> project distributed under the <a href="https://opensource.org/licenses/MIT">MIT</a> license.
</footer>


      </main>

    </div>

  </body>

</html>